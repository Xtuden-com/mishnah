(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(t,e,a){t.exports=a(60)},48:function(t,e,a){},54:function(t,e,a){},55:function(t,e,a){},56:function(t,e,a){},60:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(33),c=a.n(i),o=a(13),s=a(28),h=(a(48),a(10)),p=a(19),l=a(32),u=a(21),d=a(37),f=a.n(d),m="http://localhost:8081/exist/apps/digitalmishnah/modules",g="".concat(m,"/getMishnah.xql?ch="),C="".concat(m,"/getTosefta.xql?ch="),y="".concat(m,"/getAlignedTosefta.xql?alignment="),b="".concat(m,"/getAlignedMishnah.xql?alignment="),v="".concat(m,"/getMTalign.xql?chapter="),T="".concat(m,"/getTMalign.xql?chapter="),O="REQUEST_RESOURCE",E="RECEIVE_RESOURCE",j="SELECT_LINK",x="CLEAR_TOSEFTA_CHAPTER",k="CLEAR_MISHNAH_CHAPTER";function M(t,e,a){return{type:O,url:t,docType:e,chapter:a}}function A(t,e,a){return{type:E,data:t,receivedAt:Date.now(),docType:e,chapter:a}}function D(t){return function(e){var a="".concat(g).concat(t);return e(M(a,"mishnahChapter",t)),fetch(a).then(function(t){return t.text()}).then(function(a){e(A(a,"mishnahChapter",t))})}}function S(t){return function(e){var a="".concat(C).concat(t);return e(M(a,"toseftaChapter",t)),fetch(a).then(function(t){return t.text()}).then(function(a){e(A(a,"toseftaChapter",t))})}}function _(t){return function(e){var a="".concat(v).concat(t);return e(M(a,"alignment")),fetch(a).then(function(t){return t.json()}).then(function(a){var n;e(A(a,"alignment")),e((n=a,function(t){var e="".concat(y).concat(n);return t(M(e,"alignedTosefta")),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(t){return t.text()}).then(function(e){t(A(e,"alignedTosefta"))})})),e(D(t))})}}function w(t){return function(e){var a="".concat(T).concat(t);return e(M(a,"alignment")),fetch(a).then(function(t){return t.json()}).then(function(a){var n;e(A(a,"alignment")),e((n=a,function(t){var e="".concat(b).concat(n);return t(M(e,"alignedMishnah")),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(t){return t.text()}).then(function(e){t(A(e,"alignedMishnah"))})})),e(S(t))})}}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:case O:case j:case x:case k:return Object.assign({},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,a={};switch(e.type){case O:return(a={})[e.docType]={isFetching:!0},Object.assign({},t,a);case E:a={};var n={isFetching:!1,data:e.data,lastUpdated:e.receivedAt};return e.chapter&&(n.chapter=e.chapter),a[e.docType]=n,Object.assign({},t,a);case j:return(a=Object.assign({},t)).alignment.data=a.alignment.data.map(function(t,a){return a===e.idx?t.selected=!0:t.selected=!1,t}),a;case x:return t.toseftaChapter?(delete(a=Object.assign({},t)).toseftaChapter,a):t;case k:return t.mishnahChapter?(delete(a=Object.assign({},t)).mishnahChapter,a):t;default:return t}}(t,e));default:return t}}var N=function(t){return Object(h.c)({resources:L,router:Object(u.b)(t)})},R=a(4),H=a(11),I=a(12),q=a(15),U=a(9),P=a(14),V=(a(54),a(30)),J=a(38),X=(a(55),function(t){function e(t){var a;return Object(H.a)(this,e),(a=Object(q.a)(this,Object(U.a)(e).call(this,t))).state={teiData:null,abs:[]},a}return Object(P.a)(e,t),Object(I.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.refs.teiData.innerHTML="Rendering TEI...",(new J.a).makeHTML5(this.props.teiData,function(e){t.setState({teiData:e}),t.refs.teiData.innerHTML="","MishnahChapter"===t.props.dataType||"ToseftaChapter"===t.props.dataType?t.refs.teiData.appendChild(e):t.setState({abs:Array.from(e.querySelectorAll("tei-ab"))})})}},{key:"componentDidUpdate",value:function(){this.doHighlights()}},{key:"doHighlights",value:function(){var t=this;if(this.state.teiData){var e="MishnahChapter"===this.props.dataType||"AlignedMishnah"===this.props.dataType?"m":"t",a=!0,n=!1,r=void 0;try{for(var i,c=function(){var a=i.value,n=(s=Object(V.a)(a,2))[0],r=s[1],c=!0,o=!1,h=void 0;try{for(var p,l=function(){var e=p.value,a=(d=Object(V.a)(e,2))[0],i=d[1],c=t.refs.teiData.querySelector('[*|id="'.concat(i,'"]'));c&&(r.selected?(c.style.backgroundColor="#722C25",c.style.color="white",0===a&&c.scrollIntoView(!0)):(c.style.backgroundColor="#C5A471",c.style.color="black"),c.style.cursor="pointer",c.onclick=function(e){switch(t.props.selectLink(n),t.props.dataType){case"AlignedTosefta":t.getChapter(c.closest("tei-ab").getAttribute("xml:id").replace(/ref-t\.(\d+\.\d+\.\d+)\.\d+/,"$1"));break;case"AlignedMishnah":t.getChapter(c.closest("tei-ab").getAttribute("xml:id").replace(/ref\.(\d+\.\d+\.\d+)\.\d+/,"$1"));break;case"MishnahChapter":case"ToseftaChapter":"driver"===t.props.type&&t.props.clearContextChapter()}})},u=r[e].entries()[Symbol.iterator]();!(c=(p=u.next()).done);c=!0){var d;l()}}catch(f){o=!0,h=f}finally{try{c||null==u.return||u.return()}finally{if(o)throw h}}},o=this.props.alignmentData.entries()[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s;c()}}catch(h){n=!0,r=h}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}}},{key:"getChapter",value:function(t){this.props.getContextChapter(t)}},{key:"render",value:function(){var t=this,e="MishnahChapter"===this.props.dataType||"ToseftaChapter"===this.props.dataType?"Simple":"Tosefta";return r.a.createElement("div",{ref:"teiData",className:"Tei ".concat(e)},this.state.abs.map(function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{className:"Ab",onClick:function(){t.getChapter(e.getAttribute("xml:id").replace(/ref-t\.(\d+\.\d+\.\d+)\.\d+/,"$1"))}},e.getAttribute("xml:id").replace("ref-t.","")),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.outerHTML}}))}))}}]),e}(n.Component)),F=(a(56),function(t){function e(){return Object(H.a)(this,e),Object(q.a)(this,Object(U.a)(e).apply(this,arguments))}return Object(P.a)(e,t),Object(I.a)(e,[{key:"componentDidMount",value:function(){this.props.getAlignment(this.props.chapter)}},{key:"componentDidUpdate",value:function(t){this.props.chapter&&t.chapter!==this.props.chapter||this.props.order&&t.order!==this.props.order?(this.props.getAlignment(this.props.chapter),this.props.clearContextChapter()):!t.chapter&&this.props.chapter&&this.props.getAlignment(this.props.chapter)}},{key:"render",value:function(){var t,e,a,n="Loading alignment data...";return this.props.alignment&&this.props.driverChapter&&(t=r.a.createElement(X,{type:"driver",teiData:this.props.driverChapter,dataType:"mt"===this.props.order?"MishnahChapter":"ToseftaChapter",alignmentData:this.props.alignment,selectLink:this.props.selectLink,clearContextChapter:this.props.clearContextChapter})),this.props.alignment&&this.props.alignedDocument&&(n=r.a.createElement(X,{type:"alignment",teiData:this.props.alignedDocument,dataType:"mt"===this.props.order?"AlignedTosefta":"AlignedMishnah",alignmentData:this.props.alignment,selectLink:this.props.selectLink,getContextChapter:this.props.getContextChapter})),this.props.alignment&&this.props.contextChapter&&(e=r.a.createElement(X,{type:"context",teiData:this.props.contextChapter,dataType:"mt"===this.props.order?"ToseftaChapter":"MishnahChapter",alignmentData:this.props.alignment,selectLink:this.props.selectLink,clearContextChapter:this.props.clearContextChapter})),this.props.contextChapterNumber&&(a=r.a.createElement("h2",null,"mt"===this.props.order?"Tosefta":"Mishnah"," Chapter ",this.props.contextChapterNumber,r.a.createElement("small",null,"(",r.a.createElement(p.b,{to:"/".concat("mt"===this.props.order?"tm":"mt","/").concat(this.props.contextChapterNumber)},"align to this chapter"),")"))),r.a.createElement("div",{className:"Viewer"},r.a.createElement("div",{className:"Column",key:"a"},r.a.createElement("h2",null,"mt"===this.props.order?"Mishnah":"Tosefta"," Chapter ",this.props.chapter),t),r.a.createElement("div",{className:"Column",key:"b"},r.a.createElement("h2",null,"Aligned ","mt"===this.props.order?"Tosefta":"Mishnah"),n),r.a.createElement("div",{className:"Column",key:"c"},a,e))}}]),e}(n.Component)),$=Object(R.e)(Object(o.c)(function(t,e){var a,n,r,i,c,o=e.order?e.order:"mt",s=e.chapter?e.chapter:"1.1.1";return t.resources&&("mt"===o?(t.resources.mishnahChapter&&t.resources.alignment&&t.resources.alignedTosefta&&(a=t.resources.mishnahChapter.data,n=t.resources.alignment.data,r=t.resources.alignedTosefta.data),t.resources.toseftaChapter&&(i=t.resources.toseftaChapter.data,c=t.resources.toseftaChapter.chapter)):(t.resources.toseftaChapter&&t.resources.alignment&&t.resources.alignedMishnah&&(a=t.resources.toseftaChapter.data,n=t.resources.alignment.data,r=t.resources.alignedMishnah.data),t.resources.mishnahChapter&&(i=t.resources.mishnahChapter.data,c=t.resources.mishnahChapter.chapter))),{order:o,chapter:s,driverChapter:a,alignment:n,alignedDocument:r,contextChapter:i,contextChapterNumber:c}},function(t,e){var a=function(e){return t(_(e))},n=function(e){return t(S(e))},r=function(){return t({type:x})};return"mt"!==(e.order?e.order:"mt")&&(a=function(e){return t(w(e))},n=function(e){return t(D(e))},r=function(){return t({type:k})}),{getAlignment:a,getContextChapter:n,clearContextChapter:r,selectLink:function(e){return t(function(t){return{type:j,idx:t}}(e))}}})(F)),B=function(t){function e(){return Object(H.a)(this,e),Object(q.a)(this,Object(U.a)(e).apply(this,arguments))}return Object(P.a)(e,t),Object(I.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(R.a,{path:"/:order?/:chapter?",render:function(t){return r.a.createElement($,{order:t.match.params.order,chapter:t.match.params.chapter})}})))}}]),e}(n.Component),K=Object(R.e)(Object(o.c)(function(t,e){return{}},function(){return{}})(B)),Q=f()(),z=Object(h.e)(N(Q),Object(h.d)(Object(h.a)(Object(l.a)(Q),s.a)));if(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__){var G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})(Object(h.a)(Object(l.a)(Q),s.a));z=Object(h.e)(N(Q),G)}var W=document.getElementById("mtviewer");c.a.render(r.a.createElement(o.a,{store:z},r.a.createElement(u.a,{history:Q},r.a.createElement(p.a,null,r.a.createElement(K,null)))),W)}},[[39,1,2]]]);
//# sourceMappingURL=main.c07b3c7e.chunk.js.map